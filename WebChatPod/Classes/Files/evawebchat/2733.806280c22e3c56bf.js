"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2733],{2733:(D,d,m)=>{m.r(d),m.d(d,{WebcameraPageModule:()=>k});var v=m(177),b=m(4341),r=m(1075),f=m(8986),u=m(467),e=m(4438);const g=["videoElement"],p=["canvasElement"];function C(n,o){if(1&n){const c=e.RV6();e.j41(0,"ion-button",14),e.bIt("click",function(){e.eBV(c);const a=e.XpG();return e.Njj(a.startCamera())}),e.EFF(1,"Start"),e.k0s()}}function h(n,o){if(1&n){const c=e.RV6();e.j41(0,"ion-button",14),e.bIt("click",function(){e.eBV(c);const a=e.XpG();return e.Njj(a.stopCamera())}),e.EFF(1,"Stop"),e.k0s()}}function E(n,o){1&n&&e.nrm(0,"video",null,0)}function _(n,o){1&n&&e.nrm(0,"canvas",15,1)}const y=[{path:"",component:(()=>{var n;class o{constructor(){this.data={videoEl:null,canvasEl:null,fileData:null,currentStream:null,constraints:{},selectedDevice:null,options:[]},this.availableCameraDevices=[],this.isCapturing=!1,this.selectedDevice="",this.buttonText="Start"}ngOnInit(){}startCamera(){var t=this;return(0,u.A)(function*(){try{t.isCapturing=!t.isCapturing;const a={video:{deviceId:t.selectedDevice?{exact:t.selectedDevice}:void 0}};t.stream=yield navigator.mediaDevices.getUserMedia(a),t.videoElement&&t.videoElement.nativeElement&&t.canvasElement&&t.stream&&(t.videoElement.nativeElement.srcObject=t.stream,t.videoElement.nativeElement.play())}catch(a){console.error(a)}})()}captureImage(){try{if(this.videoElement&&this.canvasElement){const t=this.videoElement.nativeElement,a=this.canvasElement.nativeElement,i=a.getContext("2d");a.width=t.videoWidth,a.height=t.videoHeight,i.drawImage(t,0,0,a.width,a.height);const s=a.toDataURL("image/png"),l=document.createElement("a");l.download=(new Date).toISOString()+".png",l.href=s,document.body.appendChild(l),l.click(),document.body.removeChild(l)}}catch(t){console.error(t)}}stopCamera(){var t=this;return(0,u.A)(function*(){try{t.isCapturing=!t.isCapturing,t.stream&&(t.stream.getTracks().forEach(a=>{a.stop()}),t.videoElement&&t.videoElement.nativeElement&&(t.videoElement.nativeElement.srcObject=null))}catch(a){console.error(a)}})()}changeCamera(){var t=this;return(0,u.A)(function*(){try{const a=yield navigator.mediaDevices.enumerateDevices();if(t.availableCameraDevices=a?a.filter(i=>"videoinput"===i.kind):[],t.availableCameraDevices&&t.availableCameraDevices.length>0){for(let i=0;i<t.availableCameraDevices.length;i++){const s=t.availableCameraDevices[i],l=s?s.label:null;if(l)if("back"==t.currentCameraView){if(-1!=l.toLowerCase().indexOf("front")){t.selectedDevice=s.deviceId,t.currentCameraView="front";break}}else if("front"==t.currentCameraView&&-1!=l.toLowerCase().indexOf("back")){t.selectedDevice=s.deviceId,t.currentCameraView="back";break}}if(!t.selectedDevice||""==t.selectedDevice){const i=t.availableCameraDevices[0];if(i){t.selectedDevice=i.deviceId;const s=i.label;s&&(-1!=s.toLowerCase().indexOf("back")?t.currentCameraView="back":-1!=s.toLowerCase().indexOf("front")&&(t.currentCameraView="front"))}}yield t.stopCamera(),t.startCamera()}}catch(a){console.error(a)}})()}}return(n=o).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["app-webcamera"]],viewQuery:function(t,a){if(1&t&&(e.GBs(g,5),e.GBs(p,5)),2&t){let i;e.mGM(i=e.lsd())&&(a.videoElement=i.first),e.mGM(i=e.lsd())&&(a.canvasElement=i.first)}},decls:21,vars:5,consts:[["videoElement",""],["canvasElement",""],["slot","end",1,"ion-no-margin"],[3,"fullscreen"],["style","width:100%",3,"click",4,"ngIf"],[1,"content-toolbar"],[4,"ngIf"],["style","display: none;",4,"ngIf"],[1,"ion-no-border"],[1,"footer-toolbar"],["name","image"],[3,"click"],["name","camera"],["name","sync"],[2,"width","100%",3,"click"],[2,"display","none"]],template:function(t,a){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Web Camera"),e.k0s(),e.j41(4,"ion-buttons",2),e.nrm(5,"ion-menu-button"),e.k0s()()(),e.j41(6,"ion-content",3),e.DNE(7,C,2,0,"ion-button",4)(8,h,2,0,"ion-button",4),e.j41(9,"div",5),e.DNE(10,E,2,0,"video",6)(11,_,2,0,"canvas",7),e.k0s(),e.nrm(12,"div"),e.k0s(),e.j41(13,"ion-footer",8)(14,"div",9)(15,"ion-button"),e.nrm(16,"ion-icon",10),e.k0s(),e.j41(17,"ion-fab-button",11),e.bIt("click",function(){return a.captureImage()}),e.nrm(18,"ion-icon",12),e.k0s(),e.j41(19,"ion-button",11),e.bIt("click",function(){return a.changeCamera()}),e.nrm(20,"ion-icon",13),e.k0s()()()),2&t&&(e.R7$(6),e.Y8G("fullscreen",!0),e.R7$(),e.Y8G("ngIf",!a.isCapturing),e.R7$(),e.Y8G("ngIf",a.isCapturing),e.R7$(2),e.Y8G("ngIf",a.isCapturing),e.R7$(),e.Y8G("ngIf",a.isCapturing))},dependencies:[v.bT,r.Jm,r.QW,r.W9,r.YW,r.M0,r.eU,r.iq,r.MC,r.BC,r.ai],styles:[".footer-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between!important}.content-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),o})()}];let W=(()=>{var n;class o{}return(n=o).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[f.iI.forChild(y),f.iI]}),o})(),k=(()=>{var n;class o{}return(n=o).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[v.MD,b.YN,r.bv,W]}),o})()}}]);